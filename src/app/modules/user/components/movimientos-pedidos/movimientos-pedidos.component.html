<!--
  ~ Copyright (c) 2024 Luis Chumi.
  ~ Este software está licenciado bajo la Licencia Pública General de GNU versión 3. Puedes encontrar una copia de la licencia en https://www.gnu.org/licenses/gpl-3.0.html.
  ~
  ~ Para consultas o comentarios, puedes contactarme en "luischumi.9@gmail.com".
  ~ Me gustaría ser reconocido por mi trabajo y estar abierto a colaboraciones o enseñanzas sobre el programa.
  -->

<section *ngIf="!ventanaVista">
  <div class="container">
    <p class="h2">Movimiento de pedidos de zhucay</p>

    <div class="mb-4">
      <label for="estadoSelect">Buscar Pedido </label>
      <select class="form-select" aria-label="Buscar Pedido" id="estadoSelect" [(ngModel)]="pedidoInterno">
        <option value=""></option>
        <option value="1">Interno</option>
        <option value="0">Clientes</option>
      </select>
    </div>
  </div>

  <button class="btn btn-outline-primary" (click)="listarPedidos()">
    <fa-icon [icon]="faSearch"></fa-icon>
  </button>

  <div class="table-container">
    <table class="table table-sm table-responsive table-primary">
      <thead>
      <tr>
        <th scope="col">Cliente</th>
        <th scope="col">Comprobante</th>
        <th scope="col">Empresa</th>
        <th>.</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let pedido of listaPedidos" (click)="pedidoSelecionado=pedido">
        <td>{{ pedido.cliente }}</td>
        <td>{{ pedido.comprobante }}</td>
        <td>{{ pedido.empresa }}</td>
        <td>
          <button
            type="button"
            class="btn btn-primary"
            (click)="buscarMovPed(pedido)"
          >
            Continuar <fa-icon [icon]="faFolderOpen"></fa-icon>
          </button>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
</section>

<section *ngIf="ventanaVista">
  <div class="container">

    <h1 class="titulo" style="Text-transform: uppercase">Productos  {{pedidoSelecionado.comprobante}}</h1>

    <div class="col-md-4">

    </div>

    <table class="table">
      <thead>
      <tr>
        <th scope="col">Item Pedido</th>
        <th scope="col">Detalle Pedido</th>
        <th scope="col">Cantidad Pedido</th>
        <th scope="col">Observacion Pedido</th>
        <th scope="col">Cantidad Diogitada</th>
        <th scope="col">Observacion </th>
        <th>.</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let producto of listaProductosPedidos">
        <td>{{ producto.proId1 }}</td>
        <td>{{ producto.proNombre }}</td>
        <td>{{ producto.cantidad }}</td>
        <td>{{ producto.observacion }}</td>
        <td>{{ producto.cantDigitada }}</td>
        <td>{{ producto.observacionDigitada }}</td>
        <td>
        </td>
      </tr>
      </tbody>
    </table>
  </div>

  <div class="inputs-container">
    <div class="card">
      <div class="row">
        <div class="col-md-6">
          <div class="card-body">
            <img [src]="imageUrl" style="width: 100%" alt="" class="rounded" />
          </div>
        </div>

        <div class="col-md-6">
          <div class="card-body">
            <div class="input-group">
              <div class="input-group-prepend">
                <span class="input-group-text" id="">Barra y cantidad </span>
              </div>
              <input
                type="text"
                class="form-control"
                id="inputProducto"
                [(ngModel)]="barraItem"
                placeholder="Item o Barra"
                (keyup.enter)="mostrarProducto()"
                style="text-transform: uppercase"
                required
                autofocus
              />
              <input
                type="number"
                class="form-control"
                id="inputCantidad"
                [(ngModel)]="cantidad"
                placeholder="Cantidad"
                style="text-transform: uppercase"
              />
              <button class="btn btn-outline-primary" (click)="mostrarProducto()">
                <fa-icon [icon]="faSearch"></fa-icon>
              </button>
            </div>
            <hr>
            <p class="h1">{{ productoSis?.pro_nombre || "Producto" }}</p>
            <p class="display-1">{{cantProd}}</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <button class="btn btn-danger" type="button" (click)="ventanaVista = false">
    Cerrar
  </button>

</section>
